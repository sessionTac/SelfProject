<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.springboot.osbulkparts.dao.warehouse.TOrderDetailInfoDao">
  <resultMap id="BaseResultMap" type="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="order_code" jdbcType="VARCHAR" property="orderCode" />
    <result column="order_code_desc" jdbcType="VARCHAR" property="orderCodeDesc" />
    <result column="order_amount" jdbcType="DECIMAL" property="orderAmount" />
    <result column="order_date" jdbcType="VARCHAR" property="orderDate" />
    <result column="order_unit" jdbcType="VARCHAR" property="orderUnit" />
    <result column="order_id" jdbcType="VARCHAR" property="orderId" />
    <result column="order_id_item" jdbcType="VARCHAR" property="orderIdItem" />
    <result column="material_code" jdbcType="VARCHAR" property="materialCode" />
    <result column="material_desc_cn" jdbcType="VARCHAR" property="materialDescCn" />
    <result column="material_desc_en" jdbcType="VARCHAR" property="materialDescEn" />
    <result column="material_desc_rn" jdbcType="VARCHAR" property="materialDescRn" />
    <result column="material_unit" jdbcType="VARCHAR" property="materialUnit" />
    <result column="material_amount" jdbcType="DECIMAL" property="materialAmount" />
    <result column="material_category" jdbcType="VARCHAR" property="materialCategory" />
    <result column="material_relation" jdbcType="VARCHAR" property="materialRelation" />
    <result column="material_relation_unit" jdbcType="VARCHAR" property="materialRelationUnit" />
    <result column="material_relation_quantity" jdbcType="DECIMAL" property="materialRelationQuantity" />
    <result column="material_minpackage_type" jdbcType="VARCHAR" property="materialMinpackageType" />
    <result column="material_minpackage_amt" jdbcType="DECIMAL" property="materialMinpackageAmt" />
    <result column="material_minpackage_totalamt" jdbcType="DECIMAL" property="materialMinpackageTotalamt" />
    <result column="material_tax_price" jdbcType="DECIMAL" property="materialTaxPrice" />
    <result column="material_tax_totalprice" jdbcType="DECIMAL" property="materialTaxTotalprice" />
    <result column="material_vat_price" jdbcType="DECIMAL" property="materialVatPrice" />
    <result column="tax" jdbcType="DECIMAL" property="tax" />
    <result column="material_vat_totalprice" jdbcType="DECIMAL" property="materialVatTotalprice" />
    <result column="material_rate" jdbcType="DECIMAL" property="materialRate" />
    <result column="material_currency" jdbcType="VARCHAR" property="materialCurrency" />
    <result column="country_code" jdbcType="VARCHAR" property="countryCode" />
    <result column="confirm_status" jdbcType="VARCHAR" property="confirmStatus" />
    <result column="order_out_total_amount" jdbcType="DECIMAL" property="orderOutTotalAmount" />
    <result column="mater_out_total_amount" jdbcType="DECIMAL" property="materOutTotalAmount" />
    <result column="residual_amount" jdbcType="DECIMAL" property="residualAmount" />
    <result column="trim_amount" jdbcType="DECIMAL" property="trimAmount" />
    <result column="stock_amount" jdbcType="DECIMAL" property="stockAmount" />
    <result column="differ_amount" jdbcType="DECIMAL" property="differAmount" />
    <result column="take_over_amount" jdbcType="DECIMAL" property="takeOverAmount" />
    <result column="delivery_amount" jdbcType="DECIMAL" property="deliveryAmount" />
    <result column="surplus_amount" jdbcType="DECIMAL" property="surplusAmount" />
    <result column="date_flag" jdbcType="VARCHAR" property="dateFlag" />
    <result column="data_role_at" jdbcType="VARCHAR" property="dataRoleAt" />
    <result column="is_balance" jdbcType="INTEGER" property="isBalance" />
    <result column="order_detail_type" jdbcType="VARCHAR" property="orderDetailType" />
    <result column="create_user" jdbcType="VARCHAR" property="createUser" />
    <result column="create_time" jdbcType="VARCHAR" property="createTime" />
    <result column="update_user" jdbcType="VARCHAR" property="updateUser" />
    <result column="update_time" jdbcType="VARCHAR" property="updateTime" />
    <result column="is_delete" jdbcType="INTEGER" property="isDelete" />
    <result column="version" jdbcType="INTEGER" property="version" />
    <!--超发数量-->
    <association property="supperAmountQut"
                 javaType="cn.springboot.osbulkparts.entity.TMaterialRecordInfoEntity">
      <result property="supperAmount" column="supper_amount"/>
    </association>
    <!--订单型号单位-->
    <association property="dictOrderUnit"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="order_unit"/>
      <result property="name" column="dictOrderUnit"/>
    </association>
    <!--物料单位-->
    <association property="dictMaterialUnit"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="material_unit"/>
      <result property="name" column="dictMaterialUnit"/>
    </association>
    <!--物料类别-->
    <association property="dictMaterialCategory"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="material_category"/>
      <result property="name" column="dictMaterialCategory"/>
    </association>
    <!--换算后单位-->
    <association property="dictRelationUnit"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="material_relation_unit"/>
      <result property="name" column="dictRelationUnit"/>
    </association>
    <!--最小包装类型-->
    <association property="dictMinPackageType"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="material_minpackage_type"/>
      <result property="name" column="dictMinPackageType"/>
    </association>
    <!--币种-->
    <association property="dictMaterialCurrency"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="material_currency"/>
      <result property="name" column="dictMaterialCurrency"/>
    </association>
    <!--国家标志-->
    <association property="dictCountryCode"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="country_code"/>
      <result property="name" column="dictCountryCode"/>
    </association>
    <!--状态-->
    <association property="dictConfirmStatus"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="confirm_status"/>
      <result property="name" column="dictConfirmStatus"/>
    </association>
    <!--订单详细类型-->
    <association property="dictOrderDetailType"
                 javaType="cn.springboot.osbulkparts.entity.TDictDataEntity">
      <result property="value" column="order_detail_type"/>
      <result property="name" column="dictOrderDetailType"/>
    </association>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    id, order_code, order_code_desc, order_amount, order_date, order_unit, order_id, 
    order_id_item, material_code, material_desc_cn, material_desc_en, material_desc_rn, 
    material_unit, material_amount, material_category, material_relation, material_relation_unit, 
    material_relation_quantity, material_minpackage_type, material_minpackage_amt, material_minpackage_totalamt, 
    material_tax_price, material_tax_totalprice, material_vat_price, material_vat_totalprice, tax,
    material_rate, material_currency, country_code, confirm_status, order_out_total_amount, 
    mater_out_total_amount, residual_amount, trim_amount, stock_amount, differ_amount, 
    take_over_amount, delivery_amount, surplus_amount, date_flag,data_role_at, is_balance, order_detail_type,create_user, create_time,
    update_user, update_time, is_delete, version
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_order_detail_info
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <insert id="insert" parameterType="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    insert into t_order_detail_info (id, order_code, order_code_desc, 
      order_amount, order_date, order_unit, 
      order_id, order_id_item, material_code, 
      material_desc_cn, material_desc_en, material_desc_rn, 
      material_unit, material_amount, material_category, 
      material_relation, material_relation_unit, 
      material_relation_quantity, material_minpackage_type, 
      material_minpackage_amt, material_minpackage_totalamt, 
      material_tax_price, material_tax_totalprice, 
      material_vat_price, material_vat_totalprice, tax,
      material_rate, material_currency, country_code, 
      confirm_status, order_out_total_amount, mater_out_total_amount, 
      residual_amount, trim_amount, stock_amount, 
      differ_amount, take_over_amount, delivery_amount, 
      surplus_amount, data_role_at, is_balance, order_detail_type,create_user, 
      create_time, update_user, update_time, 
      is_delete, version)
    values (#{id,jdbcType=VARCHAR}, #{orderCode,jdbcType=VARCHAR}, #{orderCodeDesc,jdbcType=VARCHAR}, 
      #{orderAmount,jdbcType=DECIMAL}, #{orderDate,jdbcType=VARCHAR}, #{orderUnit,jdbcType=VARCHAR}, 
      #{orderId,jdbcType=VARCHAR}, #{orderIdItem,jdbcType=VARCHAR}, #{materialCode,jdbcType=VARCHAR}, 
      #{materialDescCn,jdbcType=VARCHAR}, #{materialDescEn,jdbcType=VARCHAR}, #{materialDescRn,jdbcType=VARCHAR}, 
      #{materialUnit,jdbcType=VARCHAR}, #{materialAmount,jdbcType=DECIMAL}, #{materialCategory,jdbcType=VARCHAR}, 
      #{materialRelation,jdbcType=VARCHAR}, #{materialRelationUnit,jdbcType=VARCHAR}, 
      #{materialRelationQuantity,jdbcType=DECIMAL}, #{materialMinpackageType,jdbcType=VARCHAR}, 
      #{materialMinpackageAmt,jdbcType=DECIMAL}, #{materialMinpackageTotalamt,jdbcType=DECIMAL}, 
      #{materialTaxPrice,jdbcType=DECIMAL}, #{materialTaxTotalprice,jdbcType=DECIMAL}, 
      #{materialVatPrice,jdbcType=DECIMAL}, #{materialVatTotalprice,jdbcType=DECIMAL}, #{tax,jdbcType=DECIMAL},
      #{materialRate,jdbcType=DECIMAL}, #{materialCurrency,jdbcType=VARCHAR}, #{countryCode,jdbcType=VARCHAR}, 
      #{confirmStatus,jdbcType=VARCHAR}, #{orderOutTotalAmount,jdbcType=DECIMAL}, #{materOutTotalAmount,jdbcType=DECIMAL}, 
      #{residualAmount,jdbcType=DECIMAL}, #{trimAmount,jdbcType=DECIMAL}, #{stockAmount,jdbcType=DECIMAL}, 
      #{differAmount,jdbcType=DECIMAL}, #{takeOverAmount,jdbcType=DECIMAL}, #{deliveryAmount,jdbcType=DECIMAL}, 
      #{surplusAmount,jdbcType=DECIMAL}, #{dataRoleAt,jdbcType=VARCHAR}, #{isBalance,jdbcType=INTEGER},
      #{orderDetailType,jdbcType=VARCHAR},#{createUser,jdbcType=VARCHAR}, 
      #{createTime,jdbcType=VARCHAR}, #{updateUser,jdbcType=VARCHAR}, #{updateTime,jdbcType=VARCHAR}, 
      #{isDelete,jdbcType=INTEGER}, #{version,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    insert into t_order_detail_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="orderCode != null">
        order_code,
      </if>
      <if test="orderCodeDesc != null">
        order_code_desc,
      </if>
      <if test="orderAmount != null">
        order_amount,
      </if>
      <if test="orderDate != null">
        order_date,
      </if>
      <if test="orderUnit != null">
        order_unit,
      </if>
      <if test="orderId != null">
        order_id,
      </if>
      <if test="orderIdItem != null">
        order_id_item,
      </if>
      <if test="materialCode != null">
        material_code,
      </if>
      <if test="materialDescCn != null">
        material_desc_cn,
      </if>
      <if test="materialDescEn != null">
        material_desc_en,
      </if>
      <if test="materialDescRn != null">
        material_desc_rn,
      </if>
      <if test="materialUnit != null">
        material_unit,
      </if>
      <if test="materialAmount != null">
        material_amount,
      </if>
      <if test="materialCategory != null">
        material_category,
      </if>
      <if test="materialRelation != null">
        material_relation,
      </if>
      <if test="materialRelationUnit != null">
        material_relation_unit,
      </if>
      <if test="materialRelationQuantity != null">
        material_relation_quantity,
      </if>
      <if test="materialMinpackageType != null">
        material_minpackage_type,
      </if>
      <if test="materialMinpackageAmt != null">
        material_minpackage_amt,
      </if>
      <if test="materialMinpackageTotalamt != null">
        material_minpackage_totalamt,
      </if>
      <if test="materialTaxPrice != null">
        material_tax_price,
      </if>
      <if test="materialTaxTotalprice != null">
        material_tax_totalprice,
      </if>
      <if test="materialVatPrice != null">
        material_vat_price,
      </if>
      <if test="materialVatTotalprice != null">
        material_vat_totalprice,
      </if>
      <if test="tax != null">
        tax,
      </if>
      <if test="materialRate != null">
        material_rate,
      </if>
      <if test="materialCurrency != null">
        material_currency,
      </if>
      <if test="countryCode != null">
        country_code,
      </if>
      <if test="confirmStatus != null">
        confirm_status,
      </if>
      <if test="orderOutTotalAmount != null">
        order_out_total_amount,
      </if>
      <if test="materOutTotalAmount != null">
        mater_out_total_amount,
      </if>
      <if test="residualAmount != null">
        residual_amount,
      </if>
      <if test="trimAmount != null">
        trim_amount,
      </if>
      <if test="stockAmount != null">
        stock_amount,
      </if>
      <if test="differAmount != null">
        differ_amount,
      </if>
      <if test="takeOverAmount != null">
        take_over_amount,
      </if>
      <if test="deliveryAmount != null">
        delivery_amount,
      </if>
      <if test="surplusAmount != null">
        surplus_amount,
      </if>
      <if test="dataRoleAt != null">
        data_role_at,
      </if>
      <if test="dateFlag != null">
        date_flag,
      </if>
      <if test="isBalance != null">
        is_balance,
      </if>
      <if test="orderDetailType != null">
        order_detail_type,
      </if>
      <if test="createUser != null">
        create_user,
      </if>
        create_time,
      <if test="updateUser != null">
        update_user,
      </if>
      <if test="updateTime != null">
        update_time,
      </if>
      <if test="isDelete != null">
        is_delete,
      </if>
      <if test="version != null">
        version,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="orderCode != null">
        #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="orderCodeDesc != null">
        #{orderCodeDesc,jdbcType=VARCHAR},
      </if>
      <if test="orderAmount != null">
        #{orderAmount,jdbcType=DECIMAL},
      </if>
      <if test="orderDate != null">
        #{orderDate,jdbcType=VARCHAR},
      </if>
      <if test="orderUnit != null">
        #{orderUnit,jdbcType=VARCHAR},
      </if>
      <if test="orderId != null">
        #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="orderIdItem != null">
        #{orderIdItem,jdbcType=VARCHAR},
      </if>
      <if test="materialCode != null">
        #{materialCode,jdbcType=VARCHAR},
      </if>
      <if test="materialDescCn != null">
        #{materialDescCn,jdbcType=VARCHAR},
      </if>
      <if test="materialDescEn != null">
        #{materialDescEn,jdbcType=VARCHAR},
      </if>
      <if test="materialDescRn != null">
        #{materialDescRn,jdbcType=VARCHAR},
      </if>
      <if test="materialUnit != null">
        #{materialUnit,jdbcType=VARCHAR},
      </if>
      <if test="materialAmount != null">
        #{materialAmount,jdbcType=DECIMAL},
      </if>
      <if test="materialCategory != null">
        #{materialCategory,jdbcType=VARCHAR},
      </if>
      <if test="materialRelation != null">
        #{materialRelation,jdbcType=VARCHAR},
      </if>
      <if test="materialRelationUnit != null">
        #{materialRelationUnit,jdbcType=VARCHAR},
      </if>
      <if test="materialRelationQuantity != null">
        #{materialRelationQuantity,jdbcType=DECIMAL},
      </if>
      <if test="materialMinpackageType != null">
        #{materialMinpackageType,jdbcType=VARCHAR},
      </if>
      <if test="materialMinpackageAmt != null">
        #{materialMinpackageAmt,jdbcType=DECIMAL},
      </if>
      <if test="materialMinpackageTotalamt != null">
        #{materialMinpackageTotalamt,jdbcType=DECIMAL},
      </if>
      <if test="materialTaxPrice != null">
        #{materialTaxPrice,jdbcType=DECIMAL},
      </if>
      <if test="materialTaxTotalprice != null">
        #{materialTaxTotalprice,jdbcType=DECIMAL},
      </if>
      <if test="materialVatPrice != null">
        #{materialVatPrice,jdbcType=DECIMAL},
      </if>
      <if test="materialVatTotalprice != null">
        #{materialVatTotalprice,jdbcType=DECIMAL},
      </if>
      <if test="tax != null">
        #{tax,jdbcType=DECIMAL},
      </if>
      <if test="materialRate != null">
        #{materialRate,jdbcType=DECIMAL},
      </if>
      <if test="materialCurrency != null">
        #{materialCurrency,jdbcType=VARCHAR},
      </if>
      <if test="countryCode != null">
        #{countryCode,jdbcType=VARCHAR},
      </if>
      <if test="confirmStatus != null">
        #{confirmStatus,jdbcType=VARCHAR},
      </if>
      <if test="orderOutTotalAmount != null">
        #{orderOutTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="materOutTotalAmount != null">
        #{materOutTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="residualAmount != null">
        #{residualAmount,jdbcType=DECIMAL},
      </if>
      <if test="trimAmount != null">
        #{trimAmount,jdbcType=DECIMAL},
      </if>
      <if test="stockAmount != null">
        #{stockAmount,jdbcType=DECIMAL},
      </if>
      <if test="differAmount != null">
        #{differAmount,jdbcType=DECIMAL},
      </if>
      <if test="takeOverAmount != null">
        #{takeOverAmount,jdbcType=DECIMAL},
      </if>
      <if test="deliveryAmount != null">
        #{deliveryAmount,jdbcType=DECIMAL},
      </if>
      <if test="surplusAmount != null">
        #{surplusAmount,jdbcType=DECIMAL},
      </if>
      <if test="dataRoleAt != null">
        #{dataRoleAt,jdbcType=VARCHAR},
      </if>
      <if test="dateFlag != null">
        #{dateFlag,jdbcType=VARCHAR},
      </if>
      <if test="isBalance != null">
        #{isBalance,jdbcType=INTEGER},
      </if>
      <if test="orderDetailType != null">
        #{orderDetailType,jdbcType=VARCHAR},
      </if>
      <if test="createUser != null">
        #{createUser,jdbcType=VARCHAR},
      </if>
      DATE_FORMAT(now(),'%Y%m%d%H%m%S'),
      <if test="updateUser != null">
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        #{version,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <insert id="insertList" parameterType="java.util.List">
    insert into t_order_detail_info (id, order_code, order_code_desc, 
      order_amount, order_date, order_unit, 
      order_id, order_id_item, material_code, 
      material_desc_cn, material_desc_en, material_desc_rn, 
      material_unit, material_amount, material_category, 
      material_relation, material_relation_unit, 
      material_relation_quantity, material_minpackage_type, 
      material_minpackage_amt, material_minpackage_totalamt, 
      material_tax_price, material_tax_totalprice, 
      material_vat_price, material_vat_totalprice, tax,
      material_rate, material_currency, country_code, 
      confirm_status, order_out_total_amount, mater_out_total_amount, 
      residual_amount, trim_amount, stock_amount, 
      differ_amount, take_over_amount, delivery_amount, 
      surplus_amount, data_role_at, is_balance,order_detail_type,date_flag,
      create_user, create_time, update_user, update_time, 
      is_delete, version) values
    <foreach collection="list" item="item" index="index" separator=",">
     (#{item.id,jdbcType=VARCHAR},
      #{item.orderCode,jdbcType=VARCHAR},
      #{item.orderCodeDesc,jdbcType=VARCHAR}, 
      #{item.orderAmount,jdbcType=DECIMAL}, 
      #{item.orderDate,jdbcType=VARCHAR}, 
      #{item.orderUnit,jdbcType=VARCHAR}, 
      #{item.orderId,jdbcType=VARCHAR}, 
      #{item.orderIdItem,jdbcType=VARCHAR}, 
      #{item.materialCode,jdbcType=VARCHAR}, 
      #{item.materialDescCn,jdbcType=VARCHAR}, 
      #{item.materialDescEn,jdbcType=VARCHAR}, 
      #{item.materialDescRn,jdbcType=VARCHAR}, 
      #{item.materialUnit,jdbcType=VARCHAR}, 
      #{item.materialAmount,jdbcType=DECIMAL}, 
      #{item.materialCategory,jdbcType=VARCHAR}, 
      #{item.materialRelation,jdbcType=VARCHAR}, 
      #{item.materialRelationUnit,jdbcType=VARCHAR}, 
      #{item.materialRelationQuantity,jdbcType=DECIMAL}, 
      #{item.materialMinpackageType,jdbcType=VARCHAR}, 
      #{item.materialMinpackageAmt,jdbcType=DECIMAL}, 
      #{item.materialMinpackageTotalamt,jdbcType=DECIMAL}, 
      #{item.materialTaxPrice,jdbcType=DECIMAL}, 
      #{item.materialTaxTotalprice,jdbcType=DECIMAL}, 
      #{item.materialVatPrice,jdbcType=DECIMAL}, 
      #{item.materialVatTotalprice,jdbcType=DECIMAL}, 
      #{item.tax,jdbcType=DECIMAL}, 
      #{item.materialRate,jdbcType=DECIMAL}, 
      #{item.materialCurrency,jdbcType=VARCHAR}, 
      #{item.countryCode,jdbcType=VARCHAR}, 
      #{item.confirmStatus,jdbcType=VARCHAR}, 
      #{item.orderOutTotalAmount,jdbcType=DECIMAL}, 
      #{item.materOutTotalAmount,jdbcType=DECIMAL}, 
      #{item.residualAmount,jdbcType=DECIMAL}, 
      #{item.trimAmount,jdbcType=DECIMAL}, 
      #{item.stockAmount,jdbcType=DECIMAL}, 
      #{item.differAmount,jdbcType=DECIMAL}, 
      #{item.takeOverAmount,jdbcType=DECIMAL}, 
      #{item.deliveryAmount,jdbcType=DECIMAL}, 
      #{item.surplusAmount,jdbcType=DECIMAL}, 
      #{item.dataRoleAt,jdbcType=VARCHAR}, 
      #{item.isBalance,jdbcType=INTEGER}, 
      #{item.orderDetailType,jdbcType=VARCHAR}, 
      #{item.dateFlag,jdbcType=VARCHAR}, 
      #{item.createUser,jdbcType=VARCHAR}, 
      DATE_FORMAT(now(),'%Y%m%d%H%m%S'),
      #{item.updateUser,jdbcType=VARCHAR}, 
      #{item.updateTime,jdbcType=VARCHAR}, 
      #{item.isDelete,jdbcType=INTEGER}, 
      #{item.version,jdbcType=INTEGER})
    </foreach>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    update t_order_detail_info
    <set>
      <if test="orderCode != null">
        order_code = #{orderCode,jdbcType=VARCHAR},
      </if>
      <if test="orderCodeDesc != null">
        order_code_desc = #{orderCodeDesc,jdbcType=VARCHAR},
      </if>
      <if test="orderAmount != null">
        order_amount = #{orderAmount,jdbcType=DECIMAL},
      </if>
      <if test="orderDate != null">
        order_date = #{orderDate,jdbcType=VARCHAR},
      </if>
      <if test="orderUnit != null">
        order_unit = #{orderUnit,jdbcType=VARCHAR},
      </if>
      <if test="orderId != null">
        order_id = #{orderId,jdbcType=VARCHAR},
      </if>
      <if test="orderIdItem != null">
        order_id_item = #{orderIdItem,jdbcType=VARCHAR},
      </if>
      <if test="materialCode != null">
        material_code = #{materialCode,jdbcType=VARCHAR},
      </if>
      <if test="materialDescCn != null">
        material_desc_cn = #{materialDescCn,jdbcType=VARCHAR},
      </if>
      <if test="materialDescEn != null">
        material_desc_en = #{materialDescEn,jdbcType=VARCHAR},
      </if>
      <if test="materialDescRn != null">
        material_desc_rn = #{materialDescRn,jdbcType=VARCHAR},
      </if>
      <if test="materialUnit != null">
        material_unit = #{materialUnit,jdbcType=VARCHAR},
      </if>
      <if test="materialAmount != null">
        material_amount = #{materialAmount,jdbcType=DECIMAL},
      </if>
      <if test="materialCategory != null">
        material_category = #{materialCategory,jdbcType=VARCHAR},
      </if>
      <if test="materialRelation != null">
        material_relation = #{materialRelation,jdbcType=VARCHAR},
      </if>
      <if test="materialRelationUnit != null">
        material_relation_unit = #{materialRelationUnit,jdbcType=VARCHAR},
      </if>
      <if test="materialRelationQuantity != null">
        material_relation_quantity = #{materialRelationQuantity,jdbcType=DECIMAL},
      </if>
      <if test="materialMinpackageType != null">
        material_minpackage_type = #{materialMinpackageType,jdbcType=VARCHAR},
      </if>
      <if test="materialMinpackageAmt != null">
        material_minpackage_amt = #{materialMinpackageAmt,jdbcType=DECIMAL},
      </if>
      <if test="materialMinpackageTotalamt != null">
        material_minpackage_totalamt = #{materialMinpackageTotalamt,jdbcType=DECIMAL},
      </if>
      <if test="materialTaxPrice != null">
        material_tax_price = #{materialTaxPrice,jdbcType=DECIMAL},
      </if>
      <if test="materialTaxTotalprice != null">
        material_tax_totalprice = #{materialTaxTotalprice,jdbcType=DECIMAL},
      </if>
      <if test="materialVatPrice != null">
        material_vat_price = #{materialVatPrice,jdbcType=DECIMAL},
      </if>
      <if test="materialVatTotalprice != null">
        material_vat_totalprice = #{materialVatTotalprice,jdbcType=DECIMAL},
      </if>
      <if test="tax != null">
        tax = #{tax,jdbcType=DECIMAL},
      </if>
      <if test="materialRate != null">
        material_rate = #{materialRate,jdbcType=DECIMAL},
      </if>
      <if test="materialCurrency != null">
        material_currency = #{materialCurrency,jdbcType=VARCHAR},
      </if>
      <if test="countryCode != null">
        country_code = #{countryCode,jdbcType=VARCHAR},
      </if>
      <if test="confirmStatus != null">
        confirm_status = #{confirmStatus,jdbcType=VARCHAR},
      </if>
      <if test="orderOutTotalAmount != null">
        order_out_total_amount = #{orderOutTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="materOutTotalAmount != null">
        mater_out_total_amount = #{materOutTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="residualAmount != null">
        residual_amount = #{residualAmount,jdbcType=DECIMAL},
      </if>
      <if test="trimAmount != null">
        trim_amount = #{trimAmount,jdbcType=DECIMAL},
      </if>
      <if test="stockAmount != null">
        stock_amount = #{stockAmount,jdbcType=DECIMAL},
      </if>
      <if test="differAmount != null">
        differ_amount = #{differAmount,jdbcType=DECIMAL},
      </if>
      <if test="takeOverAmount != null">
        take_over_amount = #{takeOverAmount,jdbcType=DECIMAL},
      </if>
      <if test="deliveryAmount != null">
        delivery_amount = #{deliveryAmount,jdbcType=DECIMAL},
      </if>
      <if test="surplusAmount != null">
        surplus_amount = #{surplusAmount,jdbcType=DECIMAL},
      </if>
      <if test="dataRoleAt != null">
        data_role_at = #{dataRoleAt,jdbcType=VARCHAR},
      </if>
      <if test="isBalance != null">
        is_balance = #{isBalance,jdbcType=INTEGER},
      </if>
      <if test="orderDetailType != null">
        order_detail_type =  #{orderDetailType,jdbcType=VARCHAR}, 
      </if>
      <if test="createUser != null">
        create_user = #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=VARCHAR},
      </if>
      <if test="updateUser != null">
        update_user = #{updateUser,jdbcType=VARCHAR},
      </if>
       update_time = DATE_FORMAT(now(),'%Y%m%d%H%m%S'),
      <if test="isDelete != null">
        is_delete = #{isDelete,jdbcType=INTEGER},
      </if>
      <if test="version != null">
        version = #{version,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jun 22 20:45:09 CST 2019.
    -->
    update t_order_detail_info
    set order_code = #{orderCode,jdbcType=VARCHAR},
      order_code_desc = #{orderCodeDesc,jdbcType=VARCHAR},
      order_amount = #{orderAmount,jdbcType=DECIMAL},
      order_date = #{orderDate,jdbcType=VARCHAR},
      order_unit = #{orderUnit,jdbcType=VARCHAR},
      order_id = #{orderId,jdbcType=VARCHAR},
      order_id_item = #{orderIdItem,jdbcType=VARCHAR},
      material_code = #{materialCode,jdbcType=VARCHAR},
      material_desc_cn = #{materialDescCn,jdbcType=VARCHAR},
      material_desc_en = #{materialDescEn,jdbcType=VARCHAR},
      material_desc_rn = #{materialDescRn,jdbcType=VARCHAR},
      material_unit = #{materialUnit,jdbcType=VARCHAR},
      material_amount = #{materialAmount,jdbcType=DECIMAL},
      material_category = #{materialCategory,jdbcType=VARCHAR},
      material_relation = #{materialRelation,jdbcType=VARCHAR},
      material_relation_unit = #{materialRelationUnit,jdbcType=VARCHAR},
      material_relation_quantity = #{materialRelationQuantity,jdbcType=DECIMAL},
      material_minpackage_type = #{materialMinpackageType,jdbcType=VARCHAR},
      material_minpackage_amt = #{materialMinpackageAmt,jdbcType=DECIMAL},
      material_minpackage_totalamt = #{materialMinpackageTotalamt,jdbcType=DECIMAL},
      material_tax_price = #{materialTaxPrice,jdbcType=DECIMAL},
      material_tax_totalprice = #{materialTaxTotalprice,jdbcType=DECIMAL},
      material_vat_price = #{materialVatPrice,jdbcType=DECIMAL},
      material_vat_totalprice = #{materialVatTotalprice,jdbcType=DECIMAL},
      tax = #{tax,jdbcType=DECIMAL},
      material_rate = #{materialRate,jdbcType=DECIMAL},
      material_currency = #{materialCurrency,jdbcType=VARCHAR},
      country_code = #{countryCode,jdbcType=VARCHAR},
      confirm_status = #{confirmStatus,jdbcType=VARCHAR},
      order_out_total_amount = #{orderOutTotalAmount,jdbcType=DECIMAL},
      mater_out_total_amount = #{materOutTotalAmount,jdbcType=DECIMAL},
      residual_amount = #{residualAmount,jdbcType=DECIMAL},
      trim_amount = #{trimAmount,jdbcType=DECIMAL},
      stock_amount = #{stockAmount,jdbcType=DECIMAL},
      differ_amount = #{differAmount,jdbcType=DECIMAL},
      take_over_amount = #{takeOverAmount,jdbcType=DECIMAL},
      delivery_amount = #{deliveryAmount,jdbcType=DECIMAL},
      surplus_amount = #{surplusAmount,jdbcType=DECIMAL},
      data_role_at = #{dataRoleAt,jdbcType=VARCHAR},
      date_flag=#{dateFlag,jdbcType=VARCHAR},
      is_balance = #{isBalance,jdbcType=INTEGER},
      order_detail_type =  #{orderDetailType,jdbcType=VARCHAR}, 
<!--       create_user = #{createUser,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=VARCHAR}, -->
      update_user = #{updateUser,jdbcType=VARCHAR},
      update_time = DATE_FORMAT(now(),'%Y%m%d%H%m%S'),
      is_delete = #{isDelete,jdbcType=INTEGER},
      version = #{version,jdbcType=INTEGER}
    where id = #{id,jdbcType=VARCHAR}
  </update>

  <select id="getOrderDetailInfoList" parameterType="cn.springboot.osbulkparts.entity.TOrderDetailInfoEntity" resultMap="BaseResultMap">
    SELECT
        t1.*, t2.`name` AS dictOrderUnit,
        t3.`name` AS dictMaterialUnit,
        t4.`name` AS dictMaterialCategory,
        t5.`name` AS dictRelationUnit,
        t6.`name` AS dictMinPackageType,
        t7.`name` AS dictMaterialCurrency,
        t8.`name` AS dictCountryCode,
        t9.`name` AS dictConfirmStatus,
        t10.stock_amount AS stockAmount,
	    t11.`name` AS dictOrderDetailType
    FROM
        t_order_detail_info AS t1
    LEFT JOIN t_dict_data AS t2 ON t1.order_unit = t2.`value`
    AND t2.dict_type_code = 'unit'
    AND t2.delete_flg = 0
    LEFT JOIN t_dict_data AS t3 ON t1.material_unit = t3.`value`
    AND t3.dict_type_code = 'unit'
    AND t3.delete_flg = 0
    LEFT JOIN t_dict_data AS t4 ON t1.material_category = t4.`value`
    AND t4.dict_type_code = 'mattertype'
    AND t4.delete_flg = 0
    LEFT JOIN t_dict_data AS t5 ON t1.material_relation_unit = t5.`value`
    AND t5.dict_type_code = 'unit'
    AND t5.delete_flg = 0
    LEFT JOIN t_dict_data AS t6 ON t1.material_minpackage_type = t6.`value`
    AND t6.dict_type_code = 'minpackageType'
    AND t6.delete_flg = 0
    LEFT JOIN t_dict_data AS t7 ON t1.material_currency = t7.`value`
    AND t7.dict_type_code = 'currency'
    AND t7.delete_flg = 0
    LEFT JOIN t_dict_data AS t8 ON t1.country_code = t8.`value`
    AND t8.dict_type_code = 'countryCode'
    AND t8.delete_flg = 0
    LEFT JOIN t_dict_data AS t9 ON t1.confirm_status = t9.`value`
    AND t9.dict_type_code = 'orderStatus'
    AND t9.delete_flg = 0
	LEFT JOIN t_stock_info AS t10 ON t1.material_code = t10.material_code
	AND t10.data_role_at = t1.data_role_at
	AND t10.is_delete = 0
	LEFT JOIN t_dict_data AS t11 ON t1.order_detail_type = t11.`value`
	AND t11.dict_type_code = 'orderDetailType'
	AND t11.delete_flg = 0
    WHERE
        t1.is_delete = 0
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderCode)">
      <bind name="orderCode_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(orderCode)"/>
      AND t1.order_code LIKE #{orderCode_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderDateStart)">
      AND t1.order_date &gt;= #{orderDateStart,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderDateEnd)">
      AND t1.order_date &lt;= #{orderDateEnd,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(materialCode)">
      <bind name="materialCode_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(materialCode)"/>
      AND t1.material_code LIKE #{materialCode_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(confirmStatus)">
      AND t1.confirm_status = #{confirmStatus,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(materialCategory)">
      AND t1.material_category = #{materialCategory,jdbcType=VARCHAR}
    </if>
    <if test="isBalance != null">
      AND t1.is_balance = #{isBalance,jdbcType=INTEGER}
    </if>
    <if test="dateFlag != null">
      AND t1.date_flag = #{dateFlag,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(dataRoleAt)">
      AND t1.data_role_at = #{dataRoleAt,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderDetailType)">
      AND t1.order_detail_type = #{orderDetailType,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderCodeDesc)">
      <bind name="orderCodeDesc_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(orderCodeDesc)"/>
      AND t1.order_code_desc LIKE #{orderCodeDesc_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(orderId)">
      <bind name="orderId_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(orderId)"/>
      AND t1.order_id LIKE #{orderId_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(materialDescCn)">
      <bind name="materialDescCn_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(materialDescCn)"/>
      AND t1.material_desc_cn LIKE #{materialDescCn_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(materialDescEn)">
      <bind name="materialDescEn_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(materialDescEn)"/>
      AND t1.material_desc_en LIKE #{materialDescEn_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(materialDescRn)">
      <bind name="materialDescRn_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(materialDescRn)"/>
      AND t1.material_desc_rn LIKE #{materialDescRn_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(createUser)">
      <bind name="createUser_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(createUser)"/>
      AND t1.create_user LIKE #{createUser_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(createTimeStart)">
      AND t1.create_time &gt;= #{createTimeStart,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(createTimeEnd)">
      AND t1.create_time &lt;= #{createTimeEnd,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(updateUser)">
      <bind name="updateUser_like" value="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@toLike(updateUser)"/>
      AND t1.update_user LIKE #{updateUser_like,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(updateTimeStart)">
      AND t1.update_time &gt;= #{updateTimeStart,jdbcType=VARCHAR}
    </if>
    <if test="@cn.springboot.osbulkparts.common.utils.CommonSqlUtils@isNotBlank(updateTimeEnd)">
      AND t1.update_time &lt;= #{updateTimeEnd,jdbcType=VARCHAR}
    </if>
    <if test="id != null">
      AND t1.id = #{id,jdbcType=DECIMAL}
    </if>
    order by t1.order_date,t1.order_code,t1.order_id_item
  </select>
<!--根据id数组 批量删除数据  逻辑删除-->
  <update id="deleteBatchData">
    update t_order_detail_info
    set update_user = #{updateUser,jdbcType=VARCHAR},update_time = DATE_FORMAT(now(),'%Y%m%d%H%m%S'),is_delete = #{isDelete,jdbcType=INTEGER}
    where id IN
    <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">
      #{item}
    </foreach>
  </update>
  <!-- 更新订单明细的发货数量 -->
  <update id="updateDeliveryAmount">
    update t_order_detail_info
    set update_user = #{updateUser,jdbcType=VARCHAR},update_time = DATE_FORMAT(now(),'%Y%m%d%H%m%S'),delivery_amount = #{deliveryAmount,jdbcType=DECIMAL}
    where
    date_flag = #{dateFlag,jdbcType=VARCHAR}
    AND is_balance = 0
    AND order_code = #{orderCode,jdbcType=VARCHAR}
    AND material_code = #{materialCode,jdbcType=VARCHAR}
  </update>
  <!--根据id数组 批量审批数据  -->
  <update id="approvalBatchData">
    update t_order_detail_info
    set update_user = #{updateUser,jdbcType=VARCHAR},update_time = DATE_FORMAT(now(),'%Y%m%d%H%m%S'),confirm_status = #{confirmStatus,jdbcType=INTEGER}
    where id IN
    <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">
      #{item}
    </foreach>
  </update>
  <!-- 按照订单型号，查询需要发货的信息 -->
  <select id="selectDeliveryInfo" resultMap="BaseResultMap">
	SELECT
		t1.order_code,
		t1.order_amount,
		t1.order_date,
		t1.material_code,
		t1.material_amount,
		IFNULL(t1.material_relation_quantity,0) as material_relation_quantity,
		IFNULL(t2.supper_amount,0) as supper_amount
	FROM
		t_order_detail_info t1
	LEFT JOIN t_material_record_info AS t2 ON t1.material_code = t2.material_code
	WHERE
	    t1.data_role_at = 0
	AND t1.is_delete = 0
	AND t1.is_balance = 0
	AND t1.date_flag = #{dateFlag,jdbcType=VARCHAR}
	AND t1.order_code IN
    <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">
      #{item}
    </foreach>
  </select>
</mapper>